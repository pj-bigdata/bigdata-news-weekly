#          大数据组技术周刊第1103期——by Leo



## **1. **Java 9 正式发布，新特性解读

针对 Java 9 新特性的介绍已经非常多了，在这里我们从不同角度简要点评部分特性。

Jigsaw
首先，谈到 Java 9 大家往往第一个想到的就是 Jigsaw 项目，这是一个雄心勃勃的项目。大家知道，Java 已经发展超过 20 年（95 年最初发布），Java 和相关生态在不断丰富的同时也越来越暴露出一些问题，比如 Java 运行环境的膨胀和臃肿，各种类库和工具在提供强大功能的同时，也越来越复杂，不同版本的类库交叉依赖导致 Jar Hell 让人头疼的问题，这些都阻碍了 Java 开发和运行效率的提升。但是由于兼容性等各方面的掣肘，对 Java 进行大刀阔斧的革新越来越困难，Jigsaw 从 Java 7 阶段就开始筹备，Java 8 阶段进行了大量工作，终于在 Java 9 里落地，有种千呼万唤始出来的意味。Jigsaw 项目的目标是改进 Java SE 平台，使其可以适应不同大小的计算设备；改进其安全性，可维护性，提高性能；简化各种类库和大型应用的开发和维护。这个项目的工作量和难度大大超出了初始规划。JSR 376 Java 平台模块化系统（JPMS, Java Platform Module System）作为 Jigsaw 项目的核心 , 其主体部分被分解成 6 个 JEP(JDK Enhancement Proposals)
• 200: The Modular JDK
• 201: Modular Source Code
• 220: Modular Run-Time Images
• 260: Encapsulate Most Internal APIs
• 261: Module System
• 282: jlink: The Java Linker
可以看到这是一个庞大的系统工程，Java 的方方面面，包括 JDK 编译工具，运行时，Java 公共 API 和私有代码等等，完全是一个整体性的改变。随着 Java 平台模块化系统的落地，开发人员无需再为不断膨胀的Java 平台苦恼例如，您可以使用 jlink 工具，根据需要定制运行时环境。这对于拥有大量镜像的容器应用场景或复杂依赖关系的大型应用等，都具有非常重要的意义。从软件开发实践的角度，Java 语言层面提供对模块的支持，可以鼓励（当然在某种程度上也可以看作强制）更加规范的开发实践，利用业界在开发领域几十年的经验、教训总结出的最佳实践，促进 Java 生态的健康发展。比如，更加完善的隐藏实现细节，这不仅可以促进面向接口、约定的编程，也可以避免可能的安全风险等。不过，换个角度来说，天下没有免费的午餐，由于 JPMS 是语言平台层面的支持，它并不是完全透明的，也就是说不管用户是否真的需要或从中收益，都会或多或少的受其影响。对此，我们可以从 JPMS 评审中针对类似深度反射限制之类的激烈争吵中，深刻体会到。比如，针对反射访问控制，最终 Java 9 开发团队，采取了相对折中的办法，在反射领域默认保持 Java 8 的默认行为。Java9 在兼容性方面，相比于过往的版本，采取了更大的容忍度。不过，Java 9 的相当一部分特性仍然是对用户透明的。只要升级到Java 9，不需要或者很少需要用户参与动作就能获益。比如，更加紧凑的字符串实现；改进的竞争锁机制；改进安全应用性能 ；利用特定 CPU 指令优化 GHASH 和 RSA 等等，这些都是开箱即用、触手可得的改进。Java 9 值得关注的新特性对于部分开发者来说，探究 Java 内部 API 或者平台底层能力是一件非常酷的事情，但这往往并不是非常容易，比如部分能力可能并没有在历史版本的公共 API 中暴露出来（比如 Unsafe 相关），或者需要特定领域的知识。在 Java 9 中，不要错过 JEP 193: Variable Handles 和JEP 274: Enhanced Method Handles，JEP 259: Stack-Walking API，
JEP 285: Spin-Wait Hints 等特性。另外，Java 9 中还有很多承上启下的特性，为未来创新打下基础或者整合、规范现有碎片化的功能，我会介绍一些有代表性的新特性。在 Java 虚拟机领域，JEP 271: Unified GC Logging 和 JEP 158：Unified JVM Logging，对各种 JVM 日志进行了统一，大家终于不用为各种碎片化的日志选项苦恼了。
Oracle 一直在努力提高 Java 启动和运行时性能，希望其能够在更广泛的场景达到或接近本地语言的性能。但是，直到今天，谈到 Java，很多 C/C++ 开发者还是会不屑地评价为启动慢，吃内存。简单说，这主要是因为 Java 编译产生的类文件是 Java 虚拟机可以理解的二进制代码，而不是真正的可执行的本地代码，需要 Java 虚拟机进行解释和编译，这带来了额外的开销。JIT（Just-in-time）编译器可以在运行时将热点编译成本地代码，但是实际应用可能非常庞大，大型 Java 应用的预热往往非常耗时，而且非热点代码可能根本没有机会被 JIT 编译。在 JDK 9 中， AOT（JEP 295: Ahead-of-Time Compilation）作为实验特性被引入进来，开发者可以利用新的 jaotc 工具将重点代码转换成类似类库一样的文件，这样会大大降低启动开销。另外 JVMCI （JEP 243: Java-Level JVM Compiler Interface）等特性，对于整个编程语言的发展，可能都具有非常重要的意义，虽然未必引起了广泛关注。目前 Graal Core API 已经被集成进入 Java 9，虽然还只是初始一小步，但是完全用 Java 语言来实现的可靠的、高性能的动态编译器，似乎不再是遥不可及，这是 Java 虚拟机开发工程师的福音。与此同时，随着 Truffle 框架和 Substrate VM 的发展，已经让个别信心满满的工程师高呼“One VM to Rule Them All!”， 也许就在不远的将来 Ploygot 以一种另类的方式成为现实。



## **2. **unCaptcha：准确率高达85%的谷歌语音验证码破解工具

 很多网站使用谷歌的验证码系统reCaptcha来防止用户使用机器人进行自动操作，比如使用机器人创建账号等。2012年，一个谷歌研究团队几乎百分百破解了其文本验证码系统。于是，谷歌将验证码升级到了语音和图像，并通过不断迭代加固他们的验证码系统。如果能够找到验证码系统的漏洞，也就等于把千万个网站暴露于攻击之下。

近日，美国马里兰大学的四位研究人员开源了一个叫作unCaptcha的工具，用于破解谷歌的语音验证码系统，准确率高达85%。

其原理如下：

![](C:\Users\Leo\Desktop\备份代码\uncaptcha.png)

该工具托管在GitHub上，并提供了安装使用示例：https://github.com/ecthros/uncaptcha

[uncaptcha官网上详细的原理介绍>>](http://uncaptcha.cs.umd.edu/)



## **3. **机器学习排序LTR入门——线性模型

这是机器学习的一系列文章，对于本系列的文章，正如你在[前一篇](http://opensourceconnections.com/blog/2017/02/24/what-is-learning-to-rank/)及[文档](https://github.com/o19s/elasticsearch-learning-to-rank#building-a-learning-to-rank-system-with-elasticsearch)中了解到的。我想把LTR映射为一个更加通用的问题：回归。回归问题需要训练一个模型，从而把一组数值特征映射到一个预测数值。

举个例子：你需要什么样的数据才能预测一家公司的利润？可能会有，手边的历史公共财务数据，包括雇员数量、股票价格、收益及现金流等。假设已知某些公司的数据，你的模型经过训练后用于预测这些变量（或其子集）的函数即利润。对于一家新公司，你可以使用这个函数来预测该公司的利润。

LTR同样是一个回归问题。你手头上有一系列评价数据，来衡量一个文档与某个查询的相关度等级。我们的相关度等级取值从A到F，更常见的情况是取值从0（完全不相关）到4（非常相关）。

[详情阅读：>>](http://www.infoq.com/cn/news/2017/10/Machine-learn-LTR-linear-model)
